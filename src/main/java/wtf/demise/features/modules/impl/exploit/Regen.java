package wtf.demise.features.modules.impl.exploit;

import net.minecraft.network.play.client.C03PacketPlayer;
import wtf.demise.events.annotations.EventTarget;
import wtf.demise.events.impl.player.MotionEvent;
import wtf.demise.features.modules.Module;
import wtf.demise.features.modules.ModuleCategory;
import wtf.demise.features.modules.ModuleInfo;
import wtf.demise.features.values.impl.SliderValue;
import wtf.demise.utils.packet.PacketUtils;

@ModuleInfo(name = "Regen", category = ModuleCategory.Exploit)
public class Regen extends Module {

    private final SliderValue health = new SliderValue("Health", 15, 1, 20, 1, this);
    private final SliderValue speed = new SliderValue("Speed", 20, 1, 300, 1, this);
    private final SliderValue tick = new SliderValue("Tick", 1, 1, 20, 1, this);

    @EventTarget
    public void onPreMotion(MotionEvent e) {
        if (e.isPre()) {
            if (mc.thePlayer.ticksExisted > 10 && mc.thePlayer.getHealth() < health.get() && mc.thePlayer.ticksExisted % tick.get() == 0) {
                for (int i = 0; i < speed.get(); i++) {
                    PacketUtils.sendPacket(new C03PacketPlayer());
                }
            }
        }
    }
}